<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8" />
  <link rel="preconnect" href="https://fonts.gstatic.com" />
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="css/styles.css" />
  <title>Food finder</title>
</head>

<body>
  <header>
    <h1>Food finder</h1>
    <form class="search">
      <input id="inputField" type="text" placeholder="Food name" />
      <button id="submit" type="button">Search</button>
    </form>
  </header>

  <div class="results"></div>

  <script>

    let myHeaders = new Headers();
    myHeaders.append("Cookie", "__cfduid=d49b963c9b1790102868fa8a468e6f9571619076712");

    let requestOptions = {
      method: 'GET',
      headers: myHeaders,
      redirect: 'follow'
    };

    const apiKey = "0b02b34a3d03459684b2e75f78070faf";
    const inputField = document.getElementById("inputField");
    const submit = document.getElementById("submit");
    const resultsContainer = document.querySelector("div");

    const numberOfResults = 3;

    function submitField(evt) {
      resultsContainer.innerHTML = "";
      search(inputField.value);
    }

    function search(query) {
      fetch("https://api.spoonacular.com/recipes/complexSearch?query=" + query + "&number=" + numberOfResults + "&apiKey=" + apiKey, requestOptions)
        .then(response => response.json())
        .then(result => naytaTulokset(result))
        .catch(error => console.log('error', error));

    }

    function naytaTulokset(result) {

      console.log(result.totalResults);

      for (let i = 0; i < numberOfResults; i++) {
        resultsContainer.innerHTML +=
          `<div class="item">
            <h3>` + result.results[i].title + `</h3>
            <img src="` + result.results[i].image + `" alt="` + result.results[i].title + `"><br>
          </div>`;
      }
    }

    submit.addEventListener("click", submitField);
  </script>
</body>

</html>